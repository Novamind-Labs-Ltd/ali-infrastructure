# Epic 1 Retrospective – Remote State Bootstrap (2025-12-29)

## Epic Summary
- **Scope:** Story 1.1 (bootstrap remote-state infrastructure) and Story 1.2 (wire environment backends).
- **Outcome:** Remote OSS bucket + TableStore lock created, dev environment verified with migrated state. Prod wiring documented but deferred until the environment exists.
- **Status:** Epic goals met; remaining work limited to future prod validation.

## Wins
1. **Terraform bootstrap repeatability** – local CloudSSO workflow plus module outputs documented for anyone to recreate.
2. **Environment onboarding clarity** – per-env REMOTE_STATE guides + backend templates remove guesswork for new engineers.
3. **Credential hygiene** – STS export helper script avoids storing static keys while keeping Terraform usable offline.

## Challenges
- Aligning Terraform with CloudSSO STS tokens required ad-hoc exports until the helper script existed.
- TableStore locking couldn’t be tested in CI yet; manual migration steps were needed locally.
- Prod verification blocked on missing prod stack, so documentation had to highlight that gap.

## Lessons Learned
- Always pair bootstrap modules with consumer documentation immediately; otherwise outputs rot.
- Provide scripts for any credential flow used more than once; manual instructions lead to repeated errors.
- Capture troubleshooting steps (e.g., TableStore lock clearing) next to the code that triggers them.

## Action Items
1. **Automate STS export** – integrate `scripts/export-aliyun-profile.sh` into onboarding doc + CI (Owner: Dev) ✅ script added, CI integration pending.
2. **Prod backend validation** – rerun the dev steps once prod env exists (Owner: Platform Eng, Before Epic 2 stories start).
3. **Backend lint check** – add pre-commit/lint step to ensure backend.hcl.example placeholders stay in sync (Owner: Dev, schedule with Epic 2).

## Prep for Epic 2
- Confirm GitHub Actions OIDC role can read the bootstrap outputs (dependency for Story 2.1).
- Ensure CloudSSO profile docs mention STS export script so identity automation work isn’t blocked.

## Readiness Assessment
- **Testing:** Dev backend init + dual plan test performed locally.
- **Deployment:** Remote state infrastructure applied; env adoption docs checked in.
- **Stakeholders:** Platform owner validated instructions via dev run.
- **Blockers:** None; only pending prod validation noted above.
